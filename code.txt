package com.example.messaging.core.sender;

import com.example.messaging.core.model.ProtocolType;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.stereotype.Component;

/**
 * 响应发送器工厂
 */
@Component
public class ResponseSenderFactory {
    private static ApplicationContext applicationContext;
    
    @Autowired
    public ResponseSenderFactory(ApplicationContext applicationContext) {
        ResponseSenderFactory.applicationContext = applicationContext;
    }
    
    public static ResponseSender getSender(ProtocolType protocol) {
        switch (protocol) {
            case SOCKET:
                return applicationContext.getBean(SocketResponseSender.class);
            case WEBSOCKET:
                return applicationContext.getBean(WebSocketResponseSender.class);
            case HTTP:
                return applicationContext.getBean(HttpResponseSender.class);
            default:
                throw new IllegalArgumentException("Unsupported protocol: " + protocol);
        }
    }
}